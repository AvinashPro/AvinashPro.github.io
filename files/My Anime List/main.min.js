const{log:log}=console;function hamburger(){const e=document.getElementById("hamburger"),t=document.getElementById("nav-links"),n=document.getElementById("closeNav");e.addEventListener("click",(()=>{t.classList.toggle("show"),e.classList.toggle("active"),n.classList.toggle("show")})),n.addEventListener("click",(()=>{t.classList.toggle("show"),e.classList.toggle("active"),n.classList.toggle("show")}))}hamburger();let me={user:{name:"Avinash",pfp:"res/pfp.jpg",passcode:"Oyvewlmxem"},data:data};me.data.all=me.data.main.concat(me.data.ecchi);let settings={theme:"dark",sort:"default",layout:"normal",data:data,ecchi:!1,pMode:!1,user:me.user,users:{guest:{},online:{}},eyeComfortMode:!1};function retrieveSettings(){null!=localStorage.getItem("mal-setting")&&(settings=JSON.parse(localStorage.getItem("mal-setting")))}function saveSettings(){localStorage.setItem("mal-setting",JSON.stringify(settings))}function handleMyMode(){if(settings.pMode)document.getElementById("personalModeCont").remove();else{settings.user=me.user,settings.data=me.data,document.getElementById("personalModeBtn").addEventListener("click",(()=>{document.getElementById("personalMode").classList.toggle("on"),settings.pMode=!0,settings.data={main:[],ecchi:[]},settings.user=null,settings.ecchi=!1,saveSettings(),window.location.reload()})),document.getElementById("signOutBtn").classList.add("fadeOut")}}function updateProfile(){let e=document.getElementById("profileName"),t=document.getElementById("pfp"),n=document.getElementById("profileEdit"),a=document.getElementById("profileSave"),s=document.getElementById("changeNavPfp"),i=document.getElementById("nav_pfp_input"),d=document.querySelector("#wlUserNameElm");settings.user&&(e.innerHTML=d.innerHTML=settings.user.name,t.src=settings.user.pfp),settings.guest&&(fadeInElm(n),n.addEventListener("click",(()=>{fadeOutElm(n),fadeInElm(a),fadeInElm(s),n.style.display="none",a.style.display="block",e.contentEditable=!0,e.classList.add("editable"),i.addEventListener("change",(()=>{const e=i.files[0];if(e){const n=new FileReader;n.onload=e=>{t.setAttribute("src",e.target.result),settings.user.pfp=settings.users.guest[settings.user.name].pfp=e.target.result,saveSettings()},n.readAsDataURL(e)}}))})),a.addEventListener("click",(()=>{e.contentEditable=!1,e.classList.remove("editable"),fadeOutElm(a),fadeOutElm(s),fadeInElm(n);let i=e.innerText.split("\\"),o=settings.user.name,r=i[0];o!=r&&delete Object.assign(settings.users.guest,{[r]:settings.users.guest[o]})[o],settings.users.guest[r].name=settings.user.name=r,i[1]&&(settings.user.pfp=settings.users.guest[settings.user.name].pfp=t.src=i[1]),e.innerHTML=d.innerHTML=r,saveSettings()})))}function fadeOutElm(e){e.classList.remove("fadeIn"),e.classList.add("fadeOut")}function fadeInElm(e){e.classList.remove("fadeOut"),e.classList.add("fadeIn")}function personalModeUpdate(){let e=document.getElementById("btnOpt"),t=document.getElementById("option-dropdown");if(settings.pMode){let n=document.getElementById("nav-links"),a=n.children[2],s=document.createElement("li");s.classList.add("dropdown-container"),s.id="sort-dropdown",s.innerHTML='\n    <div class="a dropdown-element">\n      <div>\n        <i class="fa-solid fa-arrow-down-short-wide icon"></i>\n        <p>Sort</p>\n      </div>\n      <div>\n        <span id="sort-dropdown-text" class="dropdown-text">Default</span>\n        <i class="fa-solid fa-angle-down icon"></i>\n      </div>\n    </div>',n.insertBefore(s,a);let i=document.createElement("button");i.classList.add("button"),i.innerHTML='<i class="fas fa-plus"></i> Add Anime',i.id="addAnimeBtn",e.insertBefore(i,t);let d=document.getElementById("addAnimePage");document.getElementById("addAnimeBtn").addEventListener("click",(()=>{hideNavBar(),saveAnimeCurrentType="add",setAddAnimeFieldVal("","","","","","",[],"none"),addAnimeCont.classList.add("showPage-type2"),addAnimeCont.classList.remove("hidePage-type2"),d.classList.remove("hidePage"),d.classList.add("showPage")})),document.getElementById("addAnimeContCancelBtn").addEventListener("click",(()=>{showNavBar(),addAnimeCont.classList.add("hidePage-type2"),d.classList.add("hidePage")})),document.getElementById("addAnimeSaveBtn").addEventListener("click",(()=>{addMessage(document.getElementById("addAnime_name").value,"anime added successfully!","res/add.png"),saveAnimeToLocalStorage(),addAnimeCont.classList.add("hidePage-type2"),d.classList.add("hidePage"),showNavBar()}))}else{let n=document.createElement("div");n.classList.add("dropdown-container","sort-dropdown-pers"),n.id="sort-dropdown",n.innerHTML='\n  <button class="button dropdown-element" id="sort-btn">\n    <i class="fa-solid fa-arrow-down-short-wide icon"></i>\n    <span>Sort</span>\n  </button>',e.insertBefore(n,t),createRipple(document.getElementById("sort-btn"))}}retrieveSettings(),settings.eyeComfortMode&&document.getElementById("eye-comfort-filter").classList.add("filterShow"),handleMyMode(),updateProfile(),personalModeUpdate();const animeCont=document.getElementById("anime");function updateAnimeCard(e,t=!0){let n="";if(e.forEach((e=>{let a=["January","February","March","April","May","June","July","August","September","October","November","December"],s=null;e[3].split(" ").forEach(((e,t)=>{a.includes(e)&&null==s&&(s=e)})),null===s&&(s="May"),n+=`<div class="card ${s} card-${e[0]}"> \n    <div class="card-img-parent">\n    <img src="${e[5]}" alt="Cover" name="${e[1]}"/></div>\n    <div>`,n+=t?`<div class="title"><span class="index">${e[0]}.</span> ${e[1]}</div>`:`<div class="title">${e[1]}</div>`,n+=`\n    <div class="extra">\n    <div class="aired"><span>Aired:</span> ${e[2]}</div>\n    <div class="ep"><span>Episodes:</span> ${e[4]}</div>\n    <div class="watched"><span>Watched:</span> ${e[3]}</div>\n    </div>`,settings.pMode&&(n+=`\n        <div class="side ${s}">\n          <button class="button sideBtn sideEditBtn"><i class="fa-solid fa-pen"></i></button>\n          <button class="button sideBtn sideDeleteBtn"><i class="fa-solid fa-trash"></i></button>\n          <button class="button sideBtn sideInsertDownBtn"><i class="fa-regular fa-square-caret-down"></i></button>\n        </div>`),n+="\n    </div>\n    </div>"})),animeCont.innerHTML=n,addLandscapeClassToImgs(animeCont.querySelectorAll("img")),handleImgEventList(),settings.pMode||handleAnimeDetailsPage(),settings.pMode){let e=document.getElementsByClassName("sideBtn");for(let t in e)e.hasOwnProperty(t)&&createRipple(e[t]);handleSide()}}function addLandscapeClassToImgs(e){e.forEach((e=>{e.naturalWidth>e.naturalHeight&&e.classList.add("landscape")}))}let details=document.getElementById("details");function updateDetails(e){let t=null,n={main:0,movie:0},a={main:0,movie:0};e.main.forEach((e=>{let t=e[4];"M"!=e[0].toString().slice(0,1)?(n.main+=t,a.main+=1):(n.movie+=t,a.movie+=1)})),null!=e.ecchi&&settings.ecchi?(n.ecchi=a.ecchi=0,e.ecchi.forEach((e=>{n.ecchi+=e[4],a.ecchi+=1})),a.total=a.main+a.ecchi,n.total=n.main+n.ecchi+n.movie):(n.total=n.main+n.movie,a.total=a.main),t=`\n    <div>\n    <div class="circle">\n    <div>\n    <p id="num">${a.total}</p>\n    <p>Anime's watched</p>\n    </div>\n    </div>\n    </div>\n\n    <div id="para">\n    <p style="font-size:16px; font-weight: bold;" id="t2">Anime Runtime</p>`,0!=a.main&&(t+=`<p><span class="t12 bold">Main<sub>${a.main}</sub></span>: <span class="bold">${n.main} EP</span> or about <span class="bold">${Math.floor(n.main/3)} hours</span></p>`),null!=e.ecchi&&settings.ecchi&&0!=a.ecchi&&(t+=`\n      <p><span class="t12 bold">Ecchi<sub>${a.ecchi}</sub></span>: <span class="bold">${n.ecchi} EP</span> or about <span class="bold">${Math.floor(n.ecchi/3)} hours</span></p>\n    `),0!=a.movie&&(t+=`\n    <p><span class="t12 bold">${a.movie} Movies</span> watched of about <span class="bold">${Math.floor(n.movie/3)} hours</span></p>`),t+=`<p><span class="t12">Overall</span>: <span class="bold">${n.total} Episodes</span> or about <span class="bold">${Math.floor(n.total/3)} hours</span></p>\n    </div>`,details.innerHTML=t,0==e.main.length&&0==e.ecchi.length?details.style.display="none":details.style.display="flex"}let animeDetailsCont=document.querySelector("#animeDetailsCont"),animeDetailsPage=document.querySelector("#animeDetailsPage");function handleAnimeDetailsPage(){document.querySelectorAll(".card").forEach((e=>{let t={start:{},current:{}};e.addEventListener("touchstart",(e=>{t.start.x=e.touches[0].clientX,t.start.y=e.touches[0].clientY})),e.addEventListener("touchmove",(n=>{(0==animeDetailsCont.classList.contains("showPage-type3")||animeDetailsCont.classList.contains("hidePage-type3"))&&(t.current.x=n.touches[0].clientX,t.current.y=n.touches[0].clientY,t.dx=t.current.x-t.start.x,t.dy=t.current.y-t.start.y,t.dx>50&&Math.abs(t.dy)<10&&hAnimePage(e))}))}))}function hAnimePage(e){let t;animeDetailsPage.classList.remove("hidePage-type2"),animeDetailsPage.classList.add("showPage-type2"),animeDetailsCont.classList.remove("hidePage-type3"),animeDetailsCont.classList.add("showPage-type3");let n=e.querySelector("img");settings.data.main.concat(settings.data.ecchi).forEach(((e,a)=>{n.name==e[1]&&(t=e)}));let a=animeDetailsPage.querySelector("h2");a.innerHTML=t[1],a.innerHTML+=`<span style="font-size:8px;font-weight:300;"><sub>${t[0]}</sub></span>`,t[1].length>17?a.style.fontSize="16px":a.style.fontSize="1.5em",animeDetailsPage.querySelector("#detMainCover").src=animeDetailsPage.querySelector("#detTopBg").src=t[5];let s,i=animeDetailsPage.querySelector("#detMisc");s=`\n    <div><span>Aired:</span><span>${t[2]}</span></div>\n    <div><span>Watched:</span><span>${t[3]}</span></div>`,t[6]&&(s+=`<div><span>Genre:</span><span>${getString(t[6])}</span></div>`),s+='<div id="detBot">',t[7]?s+=`\n    <div class="alignVert"><span>${t[7]}</span><span><img src="res/star.png"/></span></div>\n    `:s+='<div class="alignVert"><span>---</span><span><img src="res/star.png"/></span></div>',s+=`<div class="alignVert"><span>${t[4]} ep</span><span><img src="res/stop-watch.png"/></span></div>`,s+="</div>",i.innerHTML=s}function handleSide(){document.querySelectorAll(".card").forEach((e=>{let t={start:{x:0,y:0},current:{x:0,y:0},dx:0,dy:0},n=e.getElementsByClassName("side")[0];e.addEventListener("touchstart",(e=>{t.start={x:e.touches[0].clientX,y:e.touches[0].clientY}})),e.addEventListener("dblclick",(()=>{document.querySelectorAll(".sideShow").forEach((e=>{e!=n&&(e.classList.remove("sideShow"),e.classList.add("sideHide"))})),n.classList.toggle("sideShow")}));let a=!1;e.addEventListener("touchmove",(s=>{t.current={x:s.touches[0].clientX,y:s.touches[0].clientY},t.dx=t.current.x-t.start.x,t.dy=t.current.y-t.start.y,t.dx<-50&&Math.abs(t.dy)<10?(document.querySelectorAll(".sideShow").forEach((e=>{e.classList.remove("sideShow"),e.classList.add("sideHide")})),n.classList.add("sideShow")):t.dx>50&&Math.abs(t.dy)<10&&(n.classList.contains("sideShow")?(n.classList.remove("sideShow"),n.classList.add("sideHide"),a=!0):a||hAnimePage(e))})),e.addEventListener("touchend",(e=>{a=!1}));let s,i,d=n.querySelector(".sideEditBtn"),o=n.querySelector(".sideDeleteBtn"),r=(n.querySelector(".sideInsertDownBtn"),document.getElementById("addAnimeCont")),l=e.querySelector("img").name;settings.data.main.forEach(((e,t)=>{e[1]===l&&(s="main",i=t)})),settings.data.ecchi.forEach(((e,t)=>{e[1]===l&&(s="ecchi",i=t)})),d.addEventListener("click",(()=>{hideNavBar(),saveAnimeCurrentType="edit",saveAnimeCurrent.listType=s,saveAnimeCurrent.idx=i,r.classList.remove("hidePage-type2"),r.classList.add("showPage-type2"),addAnimePage.classList.remove("hidePage"),addAnimePage.classList.add("showPage"),n.classList.toggle("sideShow"),n.classList.toggle("sideHide"),editAnimeToLocalStorage(s,i)}));let c=document.querySelector("#confirmPrompt"),m=document.getElementById("sideDeleteAnimeName");o.addEventListener("click",(()=>{m.innerText=settings.data[s][i][1],m.type=s,m.idx=i,c.classList.remove("hidePage-type2"),c.classList.add("showPage-type2"),document.getElementById("prompt-cancel").addEventListener("click",(()=>{c.classList.add("hidePage-type2")}))}))}))}let promptElm=document.querySelector("#confirmPrompt"),promptProceed=document.getElementById("prompt-proceed");function animeReIndexing(e){arr=settings.data[e],count={main:0,ecchi:0,movie:0},arr.forEach((t=>{"M"==t[0].toString().slice(0,1)?(t[0]="M"+(count.movie+1),count.movie+=1):(t[0]=count[e]+1,count[e]+=1)}))}function handleImgEventList(){animeCont.querySelectorAll("img").forEach((e=>{e.addEventListener("mousedown",(t=>{let n=e.getBoundingClientRect();displayImg(e.src,e.name,n.x,n.y,n.width,n.height),onresize=resize;let a=document.querySelector("#img-section");document.getElementById("bg").addEventListener("click",(()=>{a.classList.add("fadeOut"),a.classList.remove("fadeIn")})),document.querySelector("#imgSecImg").addEventListener("click",(e=>{if(!e)e=window.event;e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))}))}))}function scaleImage(){let e=document.getElementById("imgSecImg"),t=e.getBoundingClientRect(),[n,a,s,i]=[t.width,t.height,720,720],d={w:0,h:0},o=e.naturalWidth/e.naturalHeight,r=e.naturalHeight/e.naturalWidth,l=r*innerWidth,c=Math.min(1*innerHeight,i);return n>a?l>c?(d.h=c,d.w=o*d.h):(d.w=innerWidth,d.h=r*d.w):l>c?(d.h=c,d.w=o*d.h):(d.w=innerWidth,d.h=l),d.x=(innerWidth-d.w)/2,d.y=(innerHeight-d.h)/2,d}function displayImg(e,t,n,a,s,i){let d=document.getElementById("img-section");d.classList.remove("fadeOut"),d.classList.add("fadeIn"),d.innerHTML=`<div id="bg">\n  <div>\n  <img src="${e}" alt="Anime cover" id="imgSecImg" style="left: ${n}px; top: ${a}px; width: ${s}px; height: ${i}px;" class="img-enlarge"/>\n  <button id="close" class="cancelBtn"></button>\n  <div class="caption">\n  <a href="https://www.google.com/search?q=${t}&oq=${t}" target="_blank">${t}</a>\n  </div>\n  </div>\n  </div>`,createRipple(document.querySelector("#close"));let o=document.createElement("style"),r=scaleImage();o.innerHTML=`\n    @keyframes Enlarge {\n      0% {\n        \n      }\n      100% {\n        top: ${r.y}px;\n        left: ${r.x}px;\n        width: ${r.w}px;\n        height: ${r.h}px;\n      }\n    }\n    #close {\n      left: ${r.x+r.w-40}px;\n    }\n  `,document.head.appendChild(o)}function resize(){let e=document.createElement("style"),t=scaleImage();e.innerHTML=`\n    @keyframes Enlarge {\n      0% {\n        \n      }\n      100% {\n        top: ${t.y}px;\n        left: ${t.x}px;\n        width: ${t.w}px;\n        height: ${t.h}px;\n      }\n    }\n    #close {\n      left: ${t.x+t.w-40}px;\n    }\n    \n  `,document.head.appendChild(e)}promptProceed.addEventListener("click",(()=>{promptElm.classList.add("hidePage-type2");let e=document.getElementById("sideDeleteAnimeName").type,t=document.getElementById("sideDeleteAnimeName").idx;addMessage(settings.data[e][t][1],"anime deleted successfully!","res/delete.png"),settings.data[e].splice(t,1),animeReIndexing(e),saveAnimeCurrentType="delete",saveAnimeToLocalStorage()}));let signUpPage=document.getElementById("signUpPage"),signInPage=document.getElementById("signInPage"),mainCont=document.getElementById("main-container"),welcomeCont=document.getElementById("welcomeCont"),forgotPage=document.getElementById("forgotPage"),forgotBtn=document.getElementById("forgotBtn"),forgotGoBackBtn=document.getElementById("forgotGoBackBtn"),goBackSignInBtn=document.getElementById("goBackSignInBtn"),goBackSignUpBtn=document.getElementById("goBackSignUpBtn"),pInt=document.getElementById("pfp_input"),guestBtn=document.getElementById("guestBtn"),guestEnterBtn=document.getElementById("guestEnterBtn"),guestPage=document.getElementById("guestPage"),guestGoBackBtn=document.getElementById("guestGoBackBtn"),addAnimeCont=document.getElementById("addAnimeCont");function guestMode(){welcomeCont.style.display="none",mainCont.style.display="block",0==settings.data.main.length&&0==settings.data.ecchi.length?filter():updateDetails(settings.data)}let saveAnimeCurrentType,addAnime_name=document.getElementById("addAnime_name"),addAnime_air=document.getElementById("addAnime_air"),addAnime_watched=document.getElementById("addAnime_watched"),addAnime_ep=document.getElementById("addAnime_ep"),addAnime_cover=document.getElementById("addAnime_cover"),addAnime_score=document.getElementById("addAnime_score"),addAnime_genre=document.getElementById("addAnime_genre"),addAnime_preference=document.getElementById("addAnime_preference"),addAnime_preferenceTxt=document.getElementById("addAnime_preferenceTxt"),saveAnimeCurrent={};function saveAnimeToLocalStorage(){let e={index:null,name:addAnime_name.value,aired:addAnime_air.value,watched:addAnime_watched.value,episodes:parseInt(addAnime_ep.value),cover:addAnime_cover.value,score:addAnime_score.value,genre:[],ecchi:!1,movie:!1,favourite:!1,masterpiece:!1},t=addAnime_genre.getElementsByClassName("active-elm");for(let n in t)t.hasOwnProperty(n)&&e.genre.push(t[n].innerText);let n=document.getElementById("addAnime_preferenceTxt").innerText.toLowerCase();"masterpiece"==n&&(e.masterpiece=!0,e.favourite=!0),"favourite"==n&&(e.favourite=!0),e.movie=e.genre.includes("Movie"),e.ecchi=e.genre.includes("Ecchi");let a=mIdx=eIdx=eMIdx=0;if(settings.data.main.forEach((e=>{"number"==typeof e[0]?a++:mIdx++})),settings.data.ecchi.forEach((e=>{"number"==typeof e[0]?eIdx++:eMIdx++})),e.ecchi?(e.index=eIdx+1,e.movie&&(e.index="M"+(eMIdx+1))):(e.index=a+1,e.movie&&(e.index="M"+(mIdx+1))),"add"==saveAnimeCurrentType)e.ecchi?settings.data.ecchi.push([e.index,e.name,e.aired,e.watched,e.episodes,e.cover,e.genre,e.score,e.favourite,e.masterpiece]):settings.data.main.push([e.index,e.name,e.aired,e.watched,e.episodes,e.cover,e.genre,e.score,e.favourite,e.masterpiece]);else if("edit"==saveAnimeCurrentType){let t=saveAnimeCurrent.listType,n=saveAnimeCurrent.idx,a=0;e.movie&&(a="M0"),e.ecchi&&"main"==t?(settings.data.main.splice(n,1),settings.data.ecchi.push([a,e.name,e.aired,e.watched,e.episodes,e.cover,e.genre,e.score,e.favourite,e.masterpiece])):e.ecchi||"ecchi"!=t?settings.data[t][n]=[a,e.name,e.aired,e.watched,e.episodes,e.cover,e.genre,e.score,e.favourite,e.masterpiece]:(settings.data.ecchi.splice(n,1),settings.data.main.push([a,e.name,e.aired,e.watched,e.episodes,e.cover,e.genre,e.score,e.favourite,e.masterpiece])),animeReIndexing("main"),animeReIndexing("ecchi")}settings.guest&&(settings.users.guest[settings.user.name].data=settings.data),saveSettings(),updateDetails(settings.data),updateAnimeCard(settings.data.main),filter()}function setAddAnimeFieldVal(e,t,n,a,s,i,d,o="none"){addAnime_name.value=e,addAnime_air.value=t,addAnime_watched.value=n,addAnime_ep.value=a,addAnime_cover.value=s,addAnime_score.value=i,addAnime_genre.querySelectorAll(".dropdown-item").forEach((e=>e.classList.remove("active-elm"))),d.forEach((e=>{let t=".genre-"+e.replace(/\s+/g,"-").toLowerCase();addAnime_genre.querySelector(t).parentElement.classList.add("active-elm")})),document.getElementById("addAnime_genreTxt").innerHTML=getString(d);let r=addAnime_preference.querySelectorAll(".dropdown-item")[0],l=addAnime_preference.querySelectorAll(".dropdown-item")[1];"none"==o?(r.classList.remove("active-elm"),l.classList.remove("active-elm"),addAnime_preferenceTxt.innerHTML="none"):"favourite"==o?(l.classList.add("active-elm"),r.classList.remove("active-elm"),addAnime_preferenceTxt.innerHTML="Favourite"):(r.classList.add("active-elm"),l.classList.remove("active-elm"),addAnime_preferenceTxt.innerHTML="Masterpiece")}function editAnimeToLocalStorage(e,t){let n=settings.data[e][t],a="none";n[8]&&(a="favourite"),n[9]&&(a="masterpiece"),setAddAnimeFieldVal(n[1],n[2],n[3],n[4],n[5],n[7],n[6],a)}function deleteAnimeToLocalStorage(e,t){console.log(e,t)}if(null!=settings.user&&(welcomeCont.style.display="none",signUpPage.style.display="none",signInPage.style.display="none",forgotPage.style.display="none",guestPage.style.display="none"),settings.pMode&&null==settings.user){mainCont.style.display="none",signUpPage.style.display="none",signInPage.style.display="none",forgotPage.style.display="none",guestPage.style.display="none",goBackSignUpBtn.addEventListener("click",(()=>{signInPage.classList.add("hidePage"),signUpPage.classList.remove("hidePage"),signUpPage.classList.add("showPage")})),goBackSignInBtn.addEventListener("click",(()=>{signUpPage.classList.add("hidePage"),signInPage.classList.remove("hidePage"),signInPage.classList.add("showPage")})),forgotBtn.addEventListener("click",(()=>{signInPage.classList.add("hidePage"),forgotPage.classList.remove("hidePage"),forgotPage.classList.add("showPage")})),forgotGoBackBtn.addEventListener("click",(()=>{forgotPage.classList.add("hidePage"),signInPage.classList.remove("hidePage"),signInPage.classList.add("showPage")})),pInt.addEventListener("change",(()=>{const e=document.getElementById("pfp_input").files[0];if(e){const t=new FileReader;t.onload=e=>{document.getElementById("user_pfp").setAttribute("src",e.target.result)},t.readAsDataURL(e)}})),guestBtn.addEventListener("click",(()=>{signInPage.classList.add("hidePage"),guestPage.classList.remove("hidePage"),guestPage.classList.add("showPage")})),guestGoBackBtn.addEventListener("click",(()=>{guestPage.classList.add("hidePage"),signInPage.classList.remove("hidePage"),signInPage.classList.add("showPage")}));let e=document.getElementById("guestList");Object.keys(settings.users.guest).forEach((t=>{let n=document.createElement("div");n.innerHTML=`<img src="${settings.users.guest[t].pfp}" alt="pfp"/> <p>${t}</p>`,n.addEventListener("click",(()=>{settings.user=settings.users.guest[t],settings.guest=!0,settings.data=settings.users.guest[t].data,saveSettings(),updateAnimeCard(settings.data.main),updateDetails(settings.data),filter(),welcomeCont.style.display="none",mainCont.style.display="block",updateProfile()})),e.append(n)})),guestEnterBtn.addEventListener("click",(()=>{let e=document.getElementById("guestName").value;settings.user=settings.users.guest[e]={name:e,pfp:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR4xdIhUI7znjJDuuePgLybmeHRr4w1xjUasUdan3Q2TiyEHtPd36kVpxQ&s=10",data:{main:[],ecchi:[]},passcode:"fpqi"},settings.guest=!0,saveSettings(),welcomeCont.style.display="none",mainCont.style.display="block",updateProfile()}))}function createRipple(e){e.addEventListener("touchstart",(t=>{let n=e.children;for(key in n)if(n.hasOwnProperty(key)){let t=n[key];t.classList.contains("riple")&&e.removeChild(t)}let a=document.createElement("div");a.classList.add("riple");let s=e.getBoundingClientRect();a.setAttribute("style",`\n        width: 20px;\n        height: 20px;\n        position: absolute;\n        left: ${t.touches[0].clientX-s.x-10}px;\n        top: ${t.touches[0].clientY-s.y-10}px;\n        \n      `);let i=document.createElement("style");i.textContent=`\n        .riple {\n          background: rgba(255,255,255,0.2);\n          border-radius: 100%;\n          animation: Riple 0.8s;\n          animation-fill-mode: forwards;\n          pointer-events: none;\n        }\n        @keyframes Riple {\n          100% {\n            transform: scale(${2*s.width/20*100+150}%);\n            display: none;\n            opacity: 0;\n          }\n        }\n      `,document.head.append(i),e.appendChild(a),setTimeout((()=>{document.head.removeChild(i),a.remove()}),1e3)}))}function createDropdown(e,t){let n=document.createElement("div");n.classList.add("dropdown","dropdown-hide");let a="";t.forEach((e=>{a+=`<div class="dropdown-class dropdown-multiple-${e[2]}">`,a+=`<div class="dropdown-title">${e[0].toUpperCase()}</div>\n    <div class="hr"></div>\n    `,e[1].forEach((e=>{a+=e})),a+="</div>"})),n.innerHTML=a,e.append(n),e.data=t}let genreData=[["Action","gun genre-action"],["Adventure","tree genre-adventure"],["Comedy","face-grin-squint-tears genre-comedy"],["Drama","panorama genre-drama"],["Emotional","heart-crack genre-emotional"],["Fantasy","dragon genre-fantasy"],["Gore","person-falling-burst genre-gore"],["Gourmet","burger genre-gourmet"],["Harem","dove genre-harem"],["Horror","ghost genre-horror"],["Isekai","earth-americas genre-isekai"],["Magic","hat-wizard genre-magic"],["Martial Arts","hand-fist genre-martial-arts"],["Music","music genre-music"],["Mystery","question genre-mystery"],["Post Apocalyptic","biohazard genre-post-apocalyptic"],["Psychological","braille genre-psychological"],["Romance","heart genre-romance"],["Rom-com","heart genre-rom-com"],["School","school genre-school"],["Sci-Fi","shuttle-space genre-sci-fi"],["Slice of Life","bread-slice genre-slice-of-life"],["Sports","baseball genre-sports"],["Supernatural","dharmachakra genre-supernatural"],["Thriller","user-secret genre-thriller"],["Time Travel","timeline genre-time-travel"],["Movie","film genre-movie"],["Ecchi","cat ecchiDropItem genre-ecchi"],["All","user-astronaut allDropItem genre-all"]],monthData=[["January",""],["February",""],["March",""],["April",""],["May",""],["June",""],["July",""],["August",""],["September",""],["October",""],["November",""],["December",""]],yearData=[],yearLimit=2015,m=(new Date).getFullYear(),year_list=settings.data.main.concat(settings.data.ecchi);settings.pMode||(year_list=me.data.all),year_list.forEach((e=>{let t=NaN;e[3].toString().split(" ").forEach((e=>{NaN!=parseInt(e)&&NaN!=t&&4==e.length&&(t=parseInt(e))})),t<m&&(m=t)})),yearLimit=m;for(let e=(new Date).getFullYear();e>=yearLimit;e--)yearData.push([e,""]);let arr=dropdownItemCreate(monthData);arr.push('<div class="dropdown-title" style="margin-top:10px;">YEAR</div><div class="hr"></div>');let arr2=dropdownItemCreate(yearData);function dropdownItemCreate(e,t=null,n=null){let a=[];return e.forEach(((e,s)=>{let i="";t&&t.toLowerCase()==e[0].toLowerCase()&&(i=" active-elm",n&&(n.innerHTML=e[0])),a[s]=`<div class="dropdown-item${i}"><i class="fa-solid fa-${e[1]}"></i><span>${e[0]}</span></div>`})),a}let array=[["Genre",dropdownItemCreate(genreData),!0],["Rating",['<div class="dropdown-item"><i class="fa-solid fa-gem"></i>Masterpiece</div>','<div class="dropdown-item"><i class="fa-solid fa-star"></i>Favourite</div>']],["Date",['<div class="dropdown-container nested-dropdown" id="date-dropdown"><div class="dropdown-element"><div><i class="fa-solid fa-calendar"></i><span>Date</span></div><div>\n            <i class="fas fa-angle-down icon"></i>\n          </div></div></div>']]];createDropdown(document.getElementById("filter-dropdown"),array,document.getElementById("demo")),createDropdown(document.getElementById("option-dropdown"),[["Options",['<button class="button full" id="viewJSONBtn"><i class="fa-regular fa-file-code"></i></button>','<button class="button full dark-pink" id="saveBtn"><i class="fa-solid fa-file-pdf"></i>PDF</button>','<button class="button full" id="rearrangeBtn"><i class="fa-solid fa-dice"></i>Sort List</button>']]]),createDropdown(document.getElementById("date-dropdown"),[["Month",arr.concat(arr2),!0]]),createDropdown(document.getElementById("theme-dropdown"),[["Appearance",dropdownItemCreate([["Light","sun"],["Dark","moon"],["Twilight","cloud"],["Night","cloud-moon"]],settings.theme,document.getElementById("theme-dropdown-text"))]]),createDropdown(document.getElementById("layout-dropdown"),[["Layout",dropdownItemCreate([["Small","atom"],["Normal","dna"],["Large","satellite"]],settings.layout,document.getElementById("layout-dropdown-text"))]]),createDropdown(document.getElementById("sort-dropdown"),[["Sort",dropdownItemCreate([["Default","angles-right"],["Alphabetical","arrow-down-a-z"],["Aired","calendar-days"],["Episodes","arrow-down-9-1"],["Score","list-ol"]],settings.sort,document.getElementById("sort-dropdown-text"))]]);let b=genreData.slice().splice(0,genreData.length-1);createDropdown(document.getElementById("addAnime_genre"),[["Genre",dropdownItemCreate(b),!0]]),createDropdown(document.getElementById("addAnime_preference"),[["Preference",dropdownItemCreate([["Masterpiece","gem"],["Favourite","star"]])]]);let ecchiDropItem=document.getElementsByClassName("ecchiDropItem")[0].parentElement,ecchiDropItem2=document.querySelectorAll(".ecchiDropItem")[1].parentElement,allDropItem=document.getElementsByClassName("allDropItem")[0].parentElement;function hideEcchiOpt(){settings.ecchi||(ecchiDropItem.style.display="none",allDropItem.style.display="none",ecchiDropItem2.style.display="none")}function showEcchiOpt(){settings.ecchi&&(ecchiDropItem.style.display="flex",allDropItem.style.display="flex",ecchiDropItem2.style.display="flex")}function getString(e){let t="",n=e.length;return 0===n?t="none":1===n?t=e[0]:e.forEach(((e,a)=>{t+=a!=n-1&&a!=n-2?e+", ":a==n-2?e+" and ":e})),t}hideEcchiOpt(),showEcchiOpt();let dropdownItems=document.getElementsByClassName("dropdown-item");for(key in dropdownItems)if(dropdownItems.hasOwnProperty(key)){let e=dropdownItems[key];createRipple(e),e.addEventListener("click",(()=>{handleDropdown(e);let t=e.offsetParent.offsetParent.offsetParent.id,n=e.innerText,a=n.toLowerCase();if("filter-dropdown"==t||"date-dropdown"==t)filter(),searchAnime();else if("theme-dropdown"==t)document.getElementById("theme-dropdown-text").innerHTML=n,updateTheme(a);else if("sort-dropdown"==t){let e=document.getElementById("sort-dropdown-text");e&&(e.innerHTML=n),sortAnime(a)}else if("layout-dropdown"==t)document.getElementById("layout-dropdown-text").innerHTML=n,updateLayout(a);else if("addAnime_genre"==t){let e=new Array;addAnime_genre.querySelectorAll(".active-elm").forEach((t=>e.push(t.innerText))),document.getElementById("addAnime_genreTxt").innerHTML=getString(e)}else if("addAnime_preference"==t){let e="none",t=document.getElementById("addAnime_preference").getElementsByClassName("active-elm");for(let n in t)if(t.hasOwnProperty(n)){e=t[n].innerText}document.getElementById("addAnime_preferenceTxt").innerHTML=e}}))}let dropdownElms=document.getElementsByClassName("dropdown-element");for(let e in dropdownElms)if(dropdownElms.hasOwnProperty(e)){let t=dropdownElms[e];t.addEventListener("click",(()=>{let e=t.offsetParent,n=e.getElementsByClassName("dropdown")[0];e.classList.toggle("active"),n.classList.toggle("dropdown-show"),n.classList.toggle("dropdown-hide")}))}function handleDropdown(e){then=performance.now();let t=e.offsetParent.offsetParent,n=t.offsetParent,a=(t.offsetParent,e.offsetParent);if(n.classList.toggle("active"),t.classList.toggle("dropdown-show"),t.classList.toggle("dropdown-hide"),a.classList.contains("dropdown-multiple-true")){e.classList.toggle("active-elm");let n=t.getElementsByClassName("dropdown-multiple-undefined");for(let e in n)if(n.hasOwnProperty(e)){let t=n[e].getElementsByClassName("dropdown-item");for(let e in t)if(t.hasOwnProperty(e)){t[e].classList.remove("active-elm")}}}else{let n=t.getElementsByClassName("dropdown-item");for(let t in n)if(n.hasOwnProperty(t)){let a=n[t];a!=e&&a.classList.remove("active-elm")}e.classList.toggle("active-elm")}if(n.classList.contains("nested-dropdown")){let e=a.getElementsByClassName("dropdown-item");for(let t in e)if(e.hasOwnProperty(t)){let n=e[t];n.offsetParent.offsetParent.offsetParent.classList.contains("nested-dropdown")||n.classList.remove("active-elm")}}let s=document.getElementById("date-dropdown"),i=s.children[1].getElementsByClassName("dropdown-item"),d=!1;for(let e in i)if(i.hasOwnProperty(e)){i[e].classList.contains("active-elm")&&(d=!0)}d?s.classList.add("active"):s.classList.remove("active"),"theme-dropdown"!=n.id&&"layout-dropdown"!=n.id&&"sort-dropdown"!=n.id||e.classList.add("active-elm")}let buttons=document.getElementsByTagName("button");for(let e in buttons)if(buttons.hasOwnProperty(e)){createRipple(buttons[e])}function filter(){let e=document.getElementById("filter-dropdown").getElementsByClassName("active-elm"),t=[];for(let n in e)if(e.hasOwnProperty(n)){let a=e[n];t.push(a.innerText.toLowerCase())}let n=t.includes("masterpiece"),a=t.includes("favourite"),s=t.includes("movie"),i=t.includes("ecchi"),d=t.includes("all"),o=[],r=[];o=i?settings.data.ecchi:settings.data.main,d&&(o=settings.data.main.concat(settings.data.ecchi)),settings.pMode||(o=i?me.data.ecchi:me.data.main,d&&(o=me.data.all)),0!=t.length?(o.forEach(((e,o)=>{let l=e[6];null==l&&(l=[]),n&&e[9]&&r.push(e),a&&e[8]&&!e[9]&&r.push(e),i||s||d?i?1==t.length?r.push(e):l.forEach((n=>{t.includes(n.toLowerCase())&&"ecchi"!=n&&r.push(e)})):s&&(l.includes("movie")||"M"==e[0].toString().slice(0,1))?1==t.length?r.push(e):l.forEach((n=>{t.includes(n.toLowerCase())&&"movie"!=n&&r.push(e)})):d&&(1==t.length?r.push(e):l.forEach((n=>{t.includes(n.toLowerCase())&&r.push(e)}))):l.forEach((n=>{t.includes(n.toLowerCase())&&r.push(e)}));let c=e[3].toLowerCase(),m=["january","february","march","april","may","june","july","august","september","october","november","december"],g=[];for(let e=(new Date).getFullYear();e>=yearLimit;e--)g.push(e.toString());let u=t.filter((e=>m.includes(e))),p=t.filter((e=>g.includes(e)));0!=p.length&&0!=u.length?p.forEach((t=>{u.forEach((n=>{let a=n+" "+t;c.includes(a)&&r.push(e)}))})):0!=u.length?u.forEach((t=>{c.includes(t)&&r.push(e)})):p.forEach((t=>{c.includes(t)&&r.push(e)}))})),r=[...new Set(r)]):r=o,document.getElementById("itemCounter").innerHTML=r.length,r.length>1?document.getElementById("itemCounterText").innerHTML="s":document.getElementById("itemCounterText").innerHTML="",updateAnimeCard(r),animeCont.filteredData=r,sortAnime(settings.sort),0==r.length?(document.getElementById("no-result").classList.remove("element-hide"),document.getElementById("no-result").classList.add("element-show")):(document.getElementById("no-result").classList.remove("element-show"),document.getElementById("no-result").classList.add("element-hide"))}function updateTheme(e){settings.theme=e,saveSettings(),"light"==e?document.body.classList.add("light"):"dark"==e&&document.body.classList.remove("light")}function sort(e,t){let n=new Array,a=new Array;return e.forEach(((e,a)=>{n.push(e[t]+" "+a)})),4!=t&&2!=t&&7!=t?n.sort():2==t?(n.forEach(((e,t)=>{let a=!1;e.split(" ").forEach((s=>{NaN!=parseInt(s)&&4===s.length&&!1===a&&(a=!0,n[t]=s+" "+e.split(" ")[e.split(" ").length-1])}))})),n.sort()):n.sort((function(e,t){return e.split(" ")[0]-t.split(" ")[0]})),n.forEach((t=>{let n=t.split(" ")[t.split(" ").length-1];a.push(e[n])})),a}function sortAnime(e){let t=JSON.parse(JSON.stringify(animeCont.filteredData));settings.sort=e,"default"==e?updateAnimeCard(animeCont.filteredData):"alphabetical"==e?updateAnimeCard(sort(t,1),!1):"aired"==e?updateAnimeCard(sort(t,2),!1):"episodes"==e?updateAnimeCard(sort(t,4),!1):"score"==e&&updateAnimeCard(sort(t,7),!1)}function updateLayout(e){settings.layout=e,saveSettings(),"normal"==e?(animeCont.classList.remove("largeLayout"),animeCont.classList.remove("smallLayout")):"large"==e?(animeCont.classList.add("largeLayout"),animeCont.classList.remove("smallLayout")):"small"==e&&(animeCont.classList.remove("largeLayout"),animeCont.classList.add("smallLayout"))}function sortFilteredData(){let e=JSON.parse(JSON.stringify(animeCont.filteredData));return mode=settings.sort,"default"==mode?animeCont.filteredData:"alphabetical"==mode?sort(e,1):"aired"==mode?sort(e,2):"episodes"==mode?sort(e,4):"score"==mode?sort(e,7):animeCont.filteredData}createRipple(document.getElementById("filter-dropdown").querySelector(".dropdown-element"));let xStart,xCurrent,dx,yStart,yCurrent,dy,sensitivity,tStart,tCurrent,searchBar=document.getElementById("searchBar");function searchAnime(){let e=searchBar.value.toLowerCase(),t=sortFilteredData(),n=[];if("/reset"===e)localStorage.clear(),searchBar.value=e="",window.location.reload();else{if("/hide"===e)return settings.ecchi=!1,saveSettings(),handleList(),searchBar.value=e="",void searchAnime();if(e.includes("/eye")&&e.includes("%")){let t=e.split(" ")[1];t=t.slice(0,-1),searchBar.value=e="",document.getElementById("eye-comfort-filter").style.background=`rgb(255,184,90,${t/100*.7})`,addMessage("Eye Comfort Mode",`Opacity set to ${t}%`,"res/eye.png")}else"/download"===e&&PWAInstallPrompt()}t.forEach((t=>{t[1].toLowerCase().includes(e)&&n.push(t)})),document.getElementById("itemCounter").innerHTML=n.length;let a=document.getElementById("itemCounterText");n.length>1?a.innerHTML="s":a.innerHTML="",0==n.length?(document.getElementById("no-result").classList.remove("element-hide"),document.getElementById("no-result").classList.add("element-show")):(document.getElementById("no-result").classList.remove("element-show"),document.getElementById("no-result").classList.add("element-hide")),"default"==settings.sort?showIdx=!0:showIdx=!1,updateAnimeCard(n,showIdx)}function swipeDetectStart(e){xStart=e.touches[0].clientX,yStart=e.touches[0].clientY,tStart=performance.now()}function swipeDetectMove(e){tCurrent=performance.now(),xCurrent=e.touches[0].clientX,yCurrent=e.touches[0].clientY,dx=xCurrent-xStart,dy=yCurrent-yStart,sensitivity=Math.abs(dx/(tCurrent-tStart));let t=document.getElementById("hamburger"),n=document.getElementById("nav-links"),a=document.getElementById("closeNav");innerWidth<800&&(dx>70&&Math.abs(dy)<30&&sensitivity>1?(t.classList.add("active"),n.classList.add("show"),a.classList.add("show")):dx<-70&&Math.abs(dy)<30&&sensitivity>1&&(t.classList.remove("active"),n.classList.remove("show"),a.classList.remove("show")))}function handleRList(){let e,t=document.getElementById("rMain"),n=(document.getElementById("rEcchi"),document.getElementById("rearrangeList"));e=t.classList.contains("rActive")?"main":"ecchi",n.innerHTML="",settings.data[e].forEach(((e,t)=>{n.innerHTML+=`<div class="rearrangeAnimePageItems" draggable="true" title="${t}">\n      <img src="${e[5]}" alt="cover-image"/> \n      <div>\n        <div style="display:flex; justify-content:space-between;">\n          <p><span>${e[0]}</span>. ${e[1]}</p>\n          <button id="rearrangeSortBtn"></button>\n        </div>\n      </div>\n    </div>`})),rearrangeAnime()}function rearrangeAnime(){let e=document.getElementById("rearrangeList");e.querySelectorAll(".rearrangeAnimePageItems").forEach((e=>{e.addEventListener("dragstart",(()=>{setTimeout((()=>{e.classList.add("dragging")}),0)})),e.addEventListener("dragend",(()=>{e.classList.remove("dragging")}))})),e.addEventListener("dragover",(function(t){t.preventDefault();let n=e.querySelector(".dragging"),a=[...e.querySelectorAll(".rearrangeAnimePageItems:not(.dragging)")].find((e=>t.clientY<=e.offsetTop+e.offsetHeight/2));e.insertBefore(n,a)})),e.addEventListener("dragenter",(e=>e.preventDefault()))}function handleList(){updateDetails(settings.data),hideEcchiOpt(),showEcchiOpt();let e=document.getElementById("eCont");settings.ecchi?(e.classList.add("element-hide"),document.getElementById("password").value=""):(e.classList.add("element-show"),e.classList.remove("element-hide"))}function _0x188e(){const e=["7fjASKg","9ZeNFuG","fromCharCo","1497870HPJtfN","forEach","6168712wOodwp","1579688YyqzTe","nbJLN","4143846PEEBEC","OIWeO","4IBBfEL","60VpmlOF","4987188ZSnNYA","split","charCodeAt","1108266dnHBPt","RsJrD","4190857stggLG"];return(_0x188e=function(){return e})()}function character(e,t){const n=_0x52e8,a={OIWeO:function(e,t){return e+t}};let s="";return e[n(431)]("")[n(440)]((e=>{const i=n;s+=String[i(438)+"de"](a[i(445)](e[i(432)](),t))})),s}function _0x52e8(e,t){const n=_0x188e();return(_0x52e8=function(e,t){return n[e-=431]})(e,t)}function encryptPass(e){return{nbJLN:function(e,t,n){return e(t,n)}}[_0x52e8(443)](character,e,4)}function decryptPass(e){return{RsJrD:function(e,t,n){return e(t,n)}}[_0x52e8(434)](character,e,-4)}function handlePasscode(){let e=document.getElementById("password");e.addEventListener("input",(()=>{let t=settings.user.passcode;e.value===decryptPass(t)&&(settings.ecchi=!0,saveSettings(),handleList())}))}searchBar.addEventListener("input",searchAnime),updateTheme(settings.theme),0!=settings.data.length&&(filter(),sortAnime(settings.sort)),updateLayout(settings.layout),updateDetails(settings.data),settings.pMode||(document.querySelector("#rearrangeBtn").style.display="none",document.querySelector("#JSONSaveBtn").style.display="none",document.querySelector("#JSONImportBtn").style.display="none"),document.body.addEventListener("touchstart",(e=>swipeDetectStart(e))),document.body.addEventListener("touchmove",(e=>swipeDetectMove(e))),settings.pMode&&document.getElementById("rearrangeBtn").addEventListener("click",(()=>{let e=document.getElementById("option-dropdown"),t=e.querySelector(".dropdown");t.classList.toggle("dropdown-show"),t.classList.toggle("dropdown-hide"),e.classList.toggle("active"),hideNavBar(),settings.ecchi?document.querySelector("#rEcchi").style.display="":document.querySelector("#rEcchi").style.display="none",document.getElementById("rearrangeAnimePage").classList.add("showPage-type2"),document.getElementById("rearrangeAnimePage").classList.remove("hidePage-type2");let n=document.getElementById("rearrangeList");document.getElementById("rearrangeSaveBtn");document.getElementById("rearrangeCancel").addEventListener("click",(()=>{showNavBar(),document.getElementById("rearrangeAnimePage").classList.add("hidePage-type2"),n.innerHTML=""}));let a=document.getElementById("rMain"),s=document.getElementById("rEcchi");a.addEventListener("click",(()=>{s.classList.remove("rActive"),a.classList.add("rActive"),handleRList()})),s.addEventListener("click",(()=>{s.classList.add("rActive"),a.classList.remove("rActive"),handleRList()})),handleRList()})),handleList(),function(e,t){const n=_0x52e8,a=_0x188e();for(;;)try{if(754005===parseInt(n(433))/1+parseInt(n(442))/2+-parseInt(n(444))/3*(-parseInt(n(446))/4)+-parseInt(n(439))/5+parseInt(n(448))/6*(parseInt(n(436))/7)+parseInt(n(441))/8*(-parseInt(n(437))/9)+-parseInt(n(447))/10*(parseInt(n(435))/11))break;a.push(a.shift())}catch(e){a.push(a.shift())}}(),handlePasscode();let viewJSONBtn=document.getElementById("viewJSONBtn"),JSONPage=document.getElementById("JSONPage");function addMessage(e,t,n,a=!1){let s=document.getElementById("message-container-parent"),i=document.createElement("div");i.classList.add("toast","toast-active"),i.innerHTML=`\n    <div>\n      <img src="${n}" alt="icon" class="bigIcon-${a}" />\n    </div>\n    <div>\n      <div class="toast-title">${e}</div>\n      <div class="toast-content">${t}</div>\n    </div>\n    `,s.append(i),setTimeout((()=>{s.removeChild(i)}),5e3)}viewJSONBtn.addEventListener("click",(()=>{hideNavBar();let e=document.getElementById("option-dropdown"),t=e.querySelector(".dropdown");t.classList.toggle("dropdown-show"),t.classList.toggle("dropdown-hide"),e.classList.toggle("active"),JSONPage.classList.add("showPage-type2"),JSONPage.classList.remove("hidePage-type2")})),document.getElementById("JSONCancelBtn").addEventListener("click",(()=>{JSONPage.classList.add("hidePage-type2"),showNavBar()}));let nav=document.getElementById("nav");function hideNavBar(){nav.classList.add("hideNavBar")}function showNavBar(){nav.classList.remove("hideNavBar")}let deferredPrompt,eyeBtn=document.getElementById("eye-comfort-filter-btn"),bg=document.getElementById("eye-comfort-filter");async function PWAInstallPrompt(){if(null!==deferredPrompt){deferredPrompt.prompt();const{outcome:e}=await deferredPrompt.userChoice;"accepted"===e&&(deferredPrompt=null)}}eyeBtn.addEventListener("click",(()=>{bg.classList.toggle("filterShow"),bg.classList.contains("filterShow")?(addMessage("Eye Comfort Mode","Turned on","res/eye.png"),settings.eyeComfortMode=!0):(addMessage("Eye Comfort Mode","Turned off","res/eye.png"),settings.eyeComfortMode=!1),saveSettings()})),animeDetailsCont.addEventListener("click",(()=>{animeDetailsCont.classList.add("hidePage-type3"),animeDetailsPage.classList.add("hidePage-type2")})),document.querySelector("#animeDetailsPageCancelBtn").addEventListener("click",(()=>{animeDetailsCont.classList.add("hidePage-type3"),animeDetailsPage.classList.add("hidePage-type2")})),animeDetailsPage.addEventListener("click",(e=>{if(!e)e=window.event;e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()})),window.addEventListener("beforeinstallprompt",(e=>{deferredPrompt=e}));
